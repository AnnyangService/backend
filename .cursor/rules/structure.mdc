---
description: Use this structure guide every time you add new files or directories
globs: 
alwaysApply: false
---
# í”„ë¡œì íŠ¸ í´ë” êµ¬ì¡° ê°€ì´ë“œ (ë„ë©”ì¸ ê¸°ë°˜ + ì „ì—­/ê³µí†µ ëª¨ë“ˆ ë¶„ë¦¬)
> ğŸ“Œ Cursorì—ì„œ íŒŒì¼ ìƒì„± ì‹œ ì´ êµ¬ì¡°ë¥¼ ì°¸ê³ í•˜ì„¸ìš”.

---

## 1. ì „ì²´ êµ¬ì¡° ìš”ì•½
```
src/main/java/com/annyang
â”œâ”€â”€ global/        # ì „ì—­ ì„¤ì •, ê³µí†µ ì˜ˆì™¸/ì‘ë‹µ ë“±
â”œâ”€â”€ auth/          # ì¸ì¦/ì¸ê°€ (JWT, OAuth2 ë“±)
â”œâ”€â”€ member/        # íšŒì› ë„ë©”ì¸
â”œâ”€â”€ health/        # í—¬ìŠ¤ì²´í¬ API
â”œâ”€â”€ [ë„ë©”ì¸]/      # ìƒˆë¡œìš´ ë„ë©”ì¸ ì¶”ê°€ ì‹œ ì—¬ê¸°ì— êµ¬ì„±
â””â”€â”€ Main.java
```

---

## 2. global/ - ì „ì—­ ì„¤ì • ë° ê³µí†µ ìœ í‹¸
```
global/
â”œâ”€â”€ config/        # Spring Security, Swagger ë“± ì „ì—­ ì„¤ì •
â”œâ”€â”€ exception/     # ê³µí†µ ì˜ˆì™¸ ì²˜ë¦¬ ë° ì˜ˆì™¸ ìƒìœ„ í´ë˜ìŠ¤
â”‚   â”œâ”€â”€ BusinessException.java
â”‚   â””â”€â”€ GlobalExceptionHandler.java
â”œâ”€â”€ response/      # ê³µí†µ ì‘ë‹µ í¬ë§· ë° ì—ëŸ¬ ì½”ë“œ
â”‚   â”œâ”€â”€ ApiResponse.java
â”‚   â”œâ”€â”€ ErrorResponse.java
â”‚   â””â”€â”€ ErrorCode.java
â””â”€â”€ util/          # ê³µí†µ ìœ í‹¸ í´ë˜ìŠ¤
```

---

## 3. auth/ - ì¸ì¦/ì¸ê°€ (ë‹¤ì¤‘ ì¸ì¦ ì „ëµ ì§€ì›)
```
auth/
â”œâ”€â”€ controller/
â”œâ”€â”€ dto/
â”œâ”€â”€ exception/                    # ì¸ì¦ ê´€ë ¨ ì˜ˆì™¸
â”‚   â””â”€â”€ InvalidTokenException.java
â”œâ”€â”€ service/
â”‚   â”œâ”€â”€ AuthService.java
â”‚   â”œâ”€â”€ JwtAuthService.java
â”‚   â””â”€â”€ OAuth2AuthService.java
â”œâ”€â”€ security/
â”‚   â”œâ”€â”€ JwtAuthenticationFilter.java
â”‚   â”œâ”€â”€ JwtTokenProvider.java
â”‚   â”œâ”€â”€ OAuth2UserServiceImpl.java
â”‚   â””â”€â”€ OAuth2SuccessHandler.java
â””â”€â”€ model/
    â””â”€â”€ AuthUserPrincipal.java
```

---

## 4. member/ - íšŒì› ë„ë©”ì¸
```
member/
â”œâ”€â”€ controller/
â”œâ”€â”€ dto/
â”œâ”€â”€ entity/
â”œâ”€â”€ exception/                    # íšŒì› ë„ë©”ì¸ ê´€ë ¨ ë¹„ì¦ˆë‹ˆìŠ¤ ì˜ˆì™¸
â”‚   â”œâ”€â”€ DuplicatedEmailException.java
â”‚   â””â”€â”€ MemberNotFoundException.java
â”œâ”€â”€ repository/
â””â”€â”€ service/
```

---

## 5. ë„ë©”ì¸ ì¶”ê°€ ì‹œ í™•ì¥ ê·œì¹™

### âœ… ìƒˆ ë„ë©”ì¸ ë””ë ‰í† ë¦¬ ìƒì„±
ë„ë©”ì¸ ì´ë¦„ì€ ì†Œë¬¸ì ë‹¨ìˆ˜í˜• (ì˜ˆ: `post`, `order`, `payment` ë“±)

#### ì˜ˆ: `post` ë„ë©”ì¸
```
post/
â”œâ”€â”€ controller/
â”œâ”€â”€ dto/
â”œâ”€â”€ entity/
â”œâ”€â”€ exception/
â”œâ”€â”€ repository/
â””â”€â”€ service/
```

> **ì›ì¹™**
> - controller, service, entity, repository, dto, exception ê³„ì¸µ êµ¬ì¡° ìœ ì§€
> - controllerëŠ” RESTful API ì„¤ê³„ ì›ì¹™ ì¤€ìˆ˜
> - serviceëŠ” ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ë§Œ ë‹´ë‹¹
> - repositoryëŠ” JPA ë˜ëŠ” MyBatis ëª…í™•íˆ êµ¬ë¶„
> - exceptionì€ `BusinessException`ì„ ìƒì†í•˜ê³  ë„ë©”ì¸ë³„ë¡œ ì •ì˜
> - dtoëŠ” `Request`, `Response`, í•„ìš” ì‹œ `Command`, `Query` ë“± CQRS ìŠ¤íƒ€ì¼ í™•ì¥ ê°€ëŠ¥

---

## 6. íŒŒì¼ ë„¤ì´ë° ê·œì¹™

| ê³„ì¸µ         | ì ‘ë¯¸ì‚¬ ì˜ˆì‹œ           |
|--------------|------------------------|
| Controller   | `~Controller.java`     |
| Service      | `~Service.java`        |
| DTO          | `Request`, `Response`  |
| Entity       | ì‹¤ì œ ë„ë©”ì¸ëª…          |
| Repository   | `~Repository.java`     |
| Exception    | `~Exception.java`      |
| Security     | `~Filter`, `~Provider`, `~Handler` ë“± |

---

## 7. ê³µí†µ íŒŒì¼ ê·œì¹™

- ëª¨ë“  ê³µí†µ ì˜ˆì™¸ëŠ” `global/exception`ì— ìœ„ì¹˜í•˜ê³  `BusinessException`ì„ ìƒì†
- ë„ë©”ì¸ë³„ ë¹„ì¦ˆë‹ˆìŠ¤ ì˜ˆì™¸ëŠ” ê° ë„ë©”ì¸ì˜ `exception/` í´ë”ì— ìœ„ì¹˜
- `ErrorCode`ëŠ” `HttpStatus`, ì½”ë“œ ë¬¸ìì—´, ë©”ì‹œì§€ë¥¼ í¬í•¨í•¨
- ì‘ë‹µì€ `ApiResponse<T>` í˜•ì‹ìœ¼ë¡œ í†µì¼ (`global/response`)
- ì¸ì¦ ì‚¬ìš©ì ì •ë³´ëŠ” `AuthUserPrincipal`ë¡œ í†µí•©
- ì„¤ì •ì€ ëª¨ë‘ `global/config` ë‚´ë¶€ì— ë‘ê³ , `application.yml`ê³¼ ì—°ê³„

---

## 8. í…ŒìŠ¤íŠ¸ ë””ë ‰í† ë¦¬ êµ¬ì¡° (ì„ íƒ)
`src/test/java/com/annyang` ê¸°ì¤€

- ë„ë©”ì¸ ê¸°ì¤€ìœ¼ë¡œ í…ŒìŠ¤íŠ¸ ë””ë ‰í† ë¦¬ êµ¬ì„±
```
member/
â”œâ”€â”€ controller/
â”‚   â””â”€â”€ MemberControllerTest.java
â”œâ”€â”€ service/
â”‚   â””â”€â”€ MemberServiceTest.java
â”œâ”€â”€ exception/
â”‚   â””â”€â”€ DuplicatedEmailExceptionTest.java
```

> `@SpringBootTest`, `@WebMvcTest`, `@ServiceTest` ë“±ì„ ìƒí™©ì— ë”°ë¼ ì‚¬ìš©

---

## 9. ê¸°íƒ€ í™•ì¥ ê°€ì´ë“œ

- ê´€ë¦¬ì ì „ìš© APIëŠ” `admin/` ë„ë©”ì¸ìœ¼ë¡œ ë¶„ë¦¬
- ë°°ì¹˜/ìŠ¤ì¼€ì¤„ë§ì€ `batch/` ë˜ëŠ” `job/` ë””ë ‰í† ë¦¬ë¡œ êµ¬ì„±
- ì™¸ë¶€ ì—°ë™ APIëŠ” `external/` ë˜ëŠ” `integration/` ë””ë ‰í† ë¦¬ ì‚¬ìš©
```
external/
â”œâ”€â”€ kakao/
â”œâ”€â”€ toss/
â””â”€â”€ s3/
```
